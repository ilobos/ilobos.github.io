{"title":"electron项目中使用serialport模块，无需手动编译","uid":"c1b2ae1279983b800ac2972629308433","slug":"electron/008-eleltron-serialport","date":"2022-12-23T06:30:13.000Z","updated":"2022-12-23T07:20:26.857Z","comments":true,"path":"api/articles/electron/008-eleltron-serialport.json","keywords":null,"cover":"https://images.pexels.com/photos/290470/pexels-photo-290470.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260","content":"<hr>\n<h5 id=\"0、背景\"><a href=\"#0、背景\" class=\"headerlink\" title=\"0、背景\"></a>0、背景</h5><p>由于serialport是一个原生模块，所以electron在打包之后，无法找到这个模块，常规方式是编译该模块再重新打败，但是即便如此也有一定概率是失败的。<a href=\"https://www.electronjs.org/docs/latest/tutorial/using-native-node-modules\">前往electron官网</a>可查看如何编译原生模块。</p>\n<p>解决：Uncaught Error: Cannot find module ‘serialport’</p>\n<h5 id=\"1、版本\"><a href=\"#1、版本\" class=\"headerlink\" title=\"1、版本\"></a>1、版本</h5><p>由于前端的版本实在太多了，所以匹配下 大版本号 不对的，可以直接不用看了；electron 22 + serialport 10，无需重新编译，即可用于Windows、macOS、Linux。</p>\n<pre class=\"language-shell\" data-language=\"shell\"><code class=\"language-shell\">node -v\n16.16.0</code></pre>\n<pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\">&quot;node_modules&#x2F;electron-rebuild&quot;: &quot;3.2.9&quot;\n&quot;node_modules&#x2F;electron-builder&quot;: &quot;22.14.13&quot;\n&quot;node_modules&#x2F;electron&quot;: &quot;22.0.0&quot;\n&quot;node_modules&#x2F;serialport&quot;: &quot;10.5.0&quot;\n&quot;node_modules&#x2F;@serialport&#x2F;bindings-cpp&quot;: &quot;10.8.0&quot;</code></pre>\n\n<h5 id=\"2、Scripts\"><a href=\"#2、Scripts\" class=\"headerlink\" title=\"2、Scripts\"></a>2、Scripts</h5><pre class=\"language-json\" data-language=\"json\"><code class=\"language-json\">&quot;scripts&quot;: &#123;\n  &quot;serve&quot;: &quot;vue-cli-service electron:serve&quot;,\n  &quot;build&quot;: &quot;vue-cli-service electron:build&quot;,\n  &quot;postinstall&quot;: &quot;electron-builder install-app-deps&quot;,\n  &quot;postuninstall&quot;: &quot;electron-builder install-app-deps&quot;\n&#125;</code></pre>\n\n<h4 id=\"3、安装electron-rebuild\"><a href=\"#3、安装electron-rebuild\" class=\"headerlink\" title=\"3、安装electron-rebuild\"></a>3、安装electron-rebuild</h4><pre class=\"language-shell\" data-language=\"shell\"><code class=\"language-shell\">npm install electron-rebuild -D</code></pre>\n\n<h4 id=\"4、-重要-配置vue-config-js\"><a href=\"#4、-重要-配置vue-config-js\" class=\"headerlink\" title=\"4、(重要) 配置vue.config.js\"></a>4、(重要) 配置vue.config.js</h4><p>核心就是将 serialport 添加到“vue.config.js”文件中的externals</p>\n<pre class=\"language-js\" data-language=\"js\"><code class=\"language-js\">pluginOptions: &#123;\n   electronBuilder: &#123; \n      externals: [&#39;serialport&#39;],       \n    &#125;    \n&#125;</code></pre>\n\n<h4 id=\"5、-重要-配置allowRendererProcessReuse\"><a href=\"#5、-重要-配置allowRendererProcessReuse\" class=\"headerlink\" title=\"5、(重要) 配置allowRendererProcessReuse\"></a>5、(重要) 配置allowRendererProcessReuse</h4><p>找到主进程的入口文件：background.js</p>\n<pre class=\"language-js\" data-language=\"js\"><code class=\"language-js\">app.allowRendererProcessReuse &#x3D; false;</code></pre>","feature":true,"text":" 0、背景由于serialport是一个原生模块，所以electron在打包之后，无法找到这个模块，常规方式是编译该模块再重新打败，但是即便如此也有一定概率是失败的。前往electron官网可查看如何编译原生模块。 解决：Uncaught Error: Cannot find m...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"Electron","slug":"Electron","count":8,"path":"api/categories/Electron.json"}],"tags":[{"name":"electron","slug":"electron","count":2,"path":"api/tags/electron.json"},{"name":"serialport","slug":"serialport","count":1,"path":"api/tags/serialport.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#0%E3%80%81%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">0、背景</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%89%88%E6%9C%AC\"><span class=\"toc-text\">1、版本</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2%E3%80%81Scripts\"><span class=\"toc-text\">2、Scripts</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3%E3%80%81%E5%AE%89%E8%A3%85electron-rebuild\"><span class=\"toc-text\">3、安装electron-rebuild</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4%E3%80%81-%E9%87%8D%E8%A6%81-%E9%85%8D%E7%BD%AEvue-config-js\"><span class=\"toc-text\">4、(重要) 配置vue.config.js</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5%E3%80%81-%E9%87%8D%E8%A6%81-%E9%85%8D%E7%BD%AEallowRendererProcessReuse\"><span class=\"toc-text\">5、(重要) 配置allowRendererProcessReuse</span></a>","author":{"name":"ilobos","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"直面挑战 躬身入局","socials":{"github":"https://github.com/ilobos/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/ilobos/"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"electron项目在mac上无法复制","uid":"1177a04a594e4ccefe1ee084cbb23114","slug":"electron/007-eleltron-mac-cannot-cp","date":"2022-12-23T05:20:13.000Z","updated":"2022-12-23T05:59:10.496Z","comments":true,"path":"api/articles/electron/007-eleltron-mac-cannot-cp.json","keywords":null,"cover":"https://images.pexels.com/photos/290470/pexels-photo-290470.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260","text":" 1、背景在mac开发中，electron在主进程中注释掉自带menu后，自己新写的menu，启动后发现无法粘贴、复制； 2、分析因为快捷键被禁用，所以无法使用Cmd + C、Cmd + X、Cmd + P等；此时我们可以按需添加快捷键，恢复想要的功能。 if (process....","link":"","photos":[],"count_time":{"symbolsCount":687,"symbolsTime":"1 mins."},"categories":[{"name":"Electron","slug":"Electron","count":8,"path":"api/categories/Electron.json"}],"tags":[{"name":"electron","slug":"electron","count":2,"path":"api/tags/electron.json"},{"name":"mac","slug":"mac","count":1,"path":"api/tags/mac.json"}],"author":{"name":"ilobos","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"直面挑战 躬身入局","socials":{"github":"https://github.com/ilobos/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/ilobos/"}}}},"feature":true}}